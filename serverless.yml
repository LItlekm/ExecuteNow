# ExecuteNow AI Proxy - 腾讯云 SCF 部署配置
# 使用 Serverless Framework 部署

component: scf
name: executenow-ai-proxy

inputs:
  name: executenow-ai-proxy
  # 区域：上海 (ap-shanghai) 或 广州 (ap-guangzhou)
  region: ap-shanghai
  # 运行时：Node.js 18.x (支持原生 fetch)
  runtime: Nodejs18.15
  # 入口函数
  handler: scf-index.main_handler
  # 源代码目录
  src: ./src
  # 超时时间（秒）- AI API 调用可能较慢
  timeout: 30
  # 内存配置（MB）
  memorySize: 128
  # 环境变量
  environment:
    variables:
      ZHIPU_API_KEY: ${env:ZHIPU_API_KEY}
      GEMINI_API_KEY: ${env:GEMINI_API_KEY}
  # API 网关触发器
  events:
    - apigw:
        parameters:
          protocols:
            - https
          environment: release
          endpoints:
            - path: /api/ai/steps
              method: POST
            - path: /api/ai/steps
              method: OPTIONS
