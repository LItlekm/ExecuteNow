// é¢„è®¾ä»»åŠ¡æ¨¡æ¿
const TASK_TEMPLATES = [
    {
        id: 'wake_up',
        name: 'èµ·åºŠ',
        icon: 'ðŸŒ…',
        category: 'æ—¥å¸¸',
        steps: [
            'çå¼€çœ¼ç›ï¼Œæ„Ÿå—ä¸€ä¸‹å…‰çº¿',
            'åœ¨åºŠä¸Šä¼¸ä¸ªæ‡’è…°',
            'æ…¢æ…¢åèµ·æ¥',
            'åŒè„šæ”¾åˆ°åœ°ä¸Š',
            'ç«™èµ·æ¥',
            'èµ°åˆ°æ´—æ‰‹é—´',
            'å¼€å§‹æ´—æ¼±'
        ]
    },
    {
        id: 'start_work',
        name: 'å¼€å§‹å·¥ä½œ',
        icon: 'ðŸ’¼',
        category: 'å·¥ä½œ',
        steps: [
            'ååˆ°å·¥ä½ä¸Š',
            'æ‰“å¼€ç”µè„‘',
            'å…³é—­æ‰€æœ‰æ— å…³çš„è½¯ä»¶å’Œç½‘é¡µ',
            'æ‰“å¼€ä»Šå¤©è¦å¤„ç†çš„å·¥ä½œæ–‡ä»¶',
            'çœ‹ä¸€çœ¼ç¬¬ä¸€è¡Œå†…å®¹',
            'æŠŠæ‰‹æ”¾åœ¨é”®ç›˜ä¸Š',
            'å¼€å§‹è¾“å…¥ç¬¬ä¸€ä¸ªå­—'
        ]
    },
    {
        id: 'start_study',
        name: 'å¼€å§‹å­¦ä¹ ',
        icon: 'ðŸ“š',
        category: 'å­¦ä¹ ',
        steps: [
            'æ‰¾ä¸€ä¸ªå®‰é™çš„åœ°æ–¹åä¸‹',
            'æŠŠæ‰‹æœºè°ƒæˆé™éŸ³æ”¾åˆ°ä¸€è¾¹',
            'æ‹¿å‡ºå­¦ä¹ èµ„æ–™',
            'ç¿»åˆ°ä»Šå¤©è¦å­¦çš„é‚£ä¸€é¡µ',
            'è¯»ç¬¬ä¸€æ®µè¯',
            'æ‹¿èµ·ç¬”',
            'å†™ä¸‹ç¬¬ä¸€ä¸ªç¬”è®°'
        ]
    },
    {
        id: 'exercise',
        name: 'è¿åŠ¨é”»ç‚¼',
        icon: 'ðŸƒ',
        category: 'å¥åº·',
        steps: [
            'æ¢ä¸Šè¿åŠ¨æœ',
            'ç©¿ä¸Šè¿åŠ¨éž‹',
            'åš5ä¸ªç®€å•çš„çƒ­èº«åŠ¨ä½œ',
            'åŽŸåœ°è¸æ­¥30ç§’',
            'å¼€å§‹ç¬¬ä¸€ç»„åŠ¨ä½œ'
        ]
    },
    {
        id: 'clean_room',
        name: 'æ•´ç†æˆ¿é—´',
        icon: 'ðŸ§¹',
        category: 'æ—¥å¸¸',
        steps: [
            'å…ˆçŽ¯é¡¾ä¸€ä¸‹æˆ¿é—´',
            'ä»Žæœ€æ˜¾çœ¼çš„åžƒåœ¾å¼€å§‹ï¼Œæ¡èµ·æ¥æ‰”æŽ‰',
            'æŠŠæ¡Œé¢ä¸Šçš„ä¸œè¥¿å½’ä½',
            'æ•´ç†åºŠé“º',
            'æ‰«ä¸€ä¸‹åœ°é¢',
            'å¼€çª—é€šé£Ž'
        ]
    },
    {
        id: 'write_report',
        name: 'å†™æŠ¥å‘Š/æ–‡æ¡£',
        icon: 'ðŸ“',
        category: 'å·¥ä½œ',
        steps: [
            'æ‰“å¼€æ–‡æ¡£è½¯ä»¶',
            'æ–°å»ºä¸€ä¸ªæ–‡æ¡£',
            'å…ˆå†™ä¸€ä¸ªæ ‡é¢˜',
            'åˆ—å‡ºå¤§çº²çš„ç¬¬ä¸€ç‚¹',
            'åœ¨ç¬¬ä¸€ç‚¹ä¸‹å†™ä¸€å¥è¯',
            'ç»§ç»­è¡¥å……å†…å®¹'
        ]
    },
    {
        id: 'cooking',
        name: 'åšé¥­',
        icon: 'ðŸ³',
        category: 'æ—¥å¸¸',
        steps: [
            'æƒ³å¥½ä»Šå¤©è¦åšä»€ä¹ˆ',
            'æŠŠéœ€è¦çš„é£Ÿææ‹¿å‡ºæ¥',
            'æ¸…æ´—é£Ÿæ',
            'æŠŠé£Ÿæåˆ‡å¥½å¤‡ç”¨',
            'å¼€ç«çƒ­é”…',
            'å¼€å§‹çƒ¹é¥ª'
        ]
    },
    {
        id: 'sleep',
        name: 'å‡†å¤‡ç¡è§‰',
        icon: 'ðŸ˜´',
        category: 'æ—¥å¸¸',
        steps: [
            'æ”¾ä¸‹æ‰‹æœº',
            'åŽ»æ´—æ¼±',
            'æ¢ä¸Šç¡è¡£',
            'æ‹‰ä¸Šçª—å¸˜',
            'èººåˆ°åºŠä¸Š',
            'é—­ä¸Šçœ¼ç›',
            'åšå‡ æ¬¡æ·±å‘¼å¸'
        ]
    },
    {
        id: 'read_book',
        name: 'é˜…è¯»',
        icon: 'ðŸ“–',
        category: 'å­¦ä¹ ',
        steps: [
            'æ‰¾ä¸€ä¸ªèˆ’é€‚çš„ä½ç½®åå¥½',
            'æŠŠæ‰‹æœºæ”¾åˆ°ä¸€è¾¹',
            'æ‹¿èµ·ä¹¦',
            'ç¿»åˆ°ä¸Šæ¬¡è¯»åˆ°çš„åœ°æ–¹',
            'å¼€å§‹è¯»ç¬¬ä¸€è¡Œ',
            'ç»§ç»­å¾€ä¸‹è¯»'
        ]
    },
    {
        id: 'meditation',
        name: 'å†¥æƒ³æ”¾æ¾',
        icon: 'ðŸ§˜',
        category: 'å¥åº·',
        steps: [
            'æ‰¾ä¸€ä¸ªå®‰é™çš„åœ°æ–¹',
            'èˆ’æœåœ°åä¸‹æˆ–èººä¸‹',
            'é—­ä¸Šçœ¼ç›',
            'åšä¸€æ¬¡æ·±å‘¼å¸',
            'æ„Ÿå—å‘¼å¸çš„èŠ‚å¥',
            'è®©æ€ç»ªæ…¢æ…¢å¹³é™'
        ]
    }
];

// æ•™ç»ƒæ•°æ®
const COACHES = [
    {
        id: 'gentle',
        name: 'æ¸©æŸ”å§å§',
        avatar: 'ðŸ‘©',
        description: 'æ¸©æš–é¼“åŠ±ï¼Œåƒå§å§ä¸€æ ·å…³å¿ƒä½ ',
        messages: {
            start: [
                'å‡†å¤‡å¥½äº†å—ï¼Ÿæˆ‘ä»¬ä¸€èµ·å¼€å§‹å§~',
                'æ·±å‘¼å¸ï¼Œæˆ‘ä»¬æ…¢æ…¢æ¥~',
                'ä»Šå¤©ä¹Ÿè¦åŠ æ²¹å“¦ï¼Œæˆ‘é™ªç€ä½ ~'
            ],
            progress: [
                'åšå¾—å¾ˆæ£’ï¼Œç»§ç»­ä¿æŒ~',
                'ä½ å¾ˆåŠªåŠ›å‘¢ï¼Œå†å¾€å‰ä¸€æ­¥~',
                'å°±æ˜¯è¿™æ ·ï¼Œä¸€æ­¥ä¸€æ­¥æ¥~',
                'ç›¸ä¿¡è‡ªå·±ï¼Œä½ å¯ä»¥çš„~'
            ],
            complete: [
                'å¤ªæ£’äº†ï¼è¿™ä¸€æ­¥å®Œæˆå•¦~',
                'å¥½åŽ‰å®³ï¼åˆå‰è¿›äº†ä¸€æ­¥~',
                'å®Œæˆå¾—å¾ˆå¥½å‘¢~',
                'çœŸä¸é”™ï¼Œç»§ç»­åŠ æ²¹~'
            ],
            finish: [
                'æ­å–œä½ å®Œæˆäº†æ‰€æœ‰æ­¥éª¤ï¼å¤ªåŽ‰å®³äº†~',
                'å…¨éƒ¨å®Œæˆå•¦ï¼ä½ çœŸçš„å¾ˆæ£’~',
                'è¾›è‹¦äº†ï¼Œå¥½å¥½ä¼‘æ¯ä¸€ä¸‹å§~'
            ],
            skip: [
                'æ²¡å…³ç³»ï¼Œè·³è¿‡è¿™ä¸€æ­¥ä¹Ÿå¯ä»¥~',
                'æœ‰æ—¶å€™è·³è¿‡ä¹Ÿæ˜¯ä¸€ç§é€‰æ‹©~'
            ],
            shelve: [
                'å¥½çš„ï¼Œå…ˆæ”¾ä¸€æ”¾ä¹Ÿæ²¡å…³ç³»~',
                'ä¼‘æ¯ä¸€ä¸‹ï¼Œç­‰å‡†å¤‡å¥½äº†å†ç»§ç»­~'
            ]
        }
    },
    {
        id: 'direct',
        name: 'ç›´æŽ¥æ•™ç»ƒ',
        avatar: 'ðŸ§‘â€ðŸ’¼',
        description: 'ç®€æ´å¹²è„†ï¼Œä¸åºŸè¯',
        messages: {
            start: [
                'å¼€å§‹ã€‚',
                'å‡†å¤‡å¥½äº†ï¼Œå¼€å§‹å§ã€‚',
                'è¡ŒåŠ¨ã€‚'
            ],
            progress: [
                'ç»§ç»­ã€‚',
                'ä¸‹ä¸€æ­¥ã€‚',
                'ä¿æŒã€‚',
                'å¾€å‰èµ°ã€‚'
            ],
            complete: [
                'å®Œæˆã€‚',
                'æžå®šã€‚',
                'ä¸‹ä¸€ä¸ªã€‚',
                'OKã€‚'
            ],
            finish: [
                'å…¨éƒ¨å®Œæˆã€‚åšå¾—ä¸é”™ã€‚',
                'ä»»åŠ¡ç»“æŸã€‚',
                'å®Œæˆäº†ã€‚'
            ],
            skip: [
                'è·³è¿‡ã€‚',
                'ç•¥è¿‡è¿™æ­¥ã€‚'
            ],
            shelve: [
                'æš‚åœã€‚',
                'å…ˆæ”¾ç€ã€‚'
            ]
        }
    },
    {
        id: 'energetic',
        name: 'å…ƒæ°”å°‘å¹´',
        avatar: 'ðŸ§‘',
        description: 'çƒ­è¡€æ¿€åŠ±ï¼Œå……æ»¡èƒ½é‡',
        messages: {
            start: [
                'å†²å†²å†²ï¼æˆ‘ä»¬å¼€å§‹å•¦ï¼',
                'å‡†å¤‡å¥½äº†å—ï¼Ÿå‡ºå‘ï¼',
                'ä»Šå¤©ä¹Ÿè¦å…ƒæ°”æ»¡æ»¡ï¼GOï¼'
            ],
            progress: [
                'å¤ªå¼ºäº†ï¼ç»§ç»­å†²ï¼',
                'å°±æ˜¯è¿™æ ·ï¼è¶…çº§æ£’ï¼',
                'å“‡ï¼ä½ å¤ªåŽ‰å®³äº†ï¼',
                'å†²å•Šï¼é©¬ä¸Šå°±å®Œæˆäº†ï¼'
            ],
            complete: [
                'è€¶ï¼æžå®šè¿™ä¸€æ­¥ï¼',
                'å¤ªå¸…äº†ï¼å®Œç¾Žï¼',
                'å“¦è€¶ï¼åˆå®Œæˆä¸€ä¸ªï¼',
                'Niceï¼ç»§ç»­å†²ï¼'
            ],
            finish: [
                'å¤ªå¼ºäº†ï¼ï¼å…¨éƒ¨å®Œæˆï¼ä½ æ˜¯æœ€æ£’çš„ï¼',
                'å“‡å¡žï¼å®Œç¾Žé€šå…³ï¼ç»™ä½ ç‚¹èµžï¼',
                'è¶…çº§åŽ‰å®³ï¼ä»Šå¤©çš„ç›®æ ‡è¾¾æˆï¼'
            ],
            skip: [
                'æ²¡äº‹æ²¡äº‹ï¼è·³è¿‡å°±è·³è¿‡ï¼',
                'æˆ˜ç•¥æ€§è·³è¿‡ï¼'
            ],
            shelve: [
                'ä¼‘æ¯ä¸€ä¸‹ä¹Ÿè¡Œï¼ç­‰ä¼šç»§ç»­å†²ï¼',
                'å¥½çš„ï¼å…»ç²¾è“„é”ï¼'
            ]
        }
    },
    {
        id: 'calm',
        name: 'å†·é™å¯¼å¸ˆ',
        avatar: 'ðŸ§“',
        description: 'ç†æ€§åˆ†æžï¼Œæ²‰ç¨³æŒ‡å¯¼',
        messages: {
            start: [
                'è®©æˆ‘ä»¬ä¸“æ³¨äºŽå½“ä¸‹ï¼Œå¼€å§‹ç¬¬ä¸€æ­¥ã€‚',
                'ä¸€æ­¥ä¸€æ­¥æ¥ï¼Œä¸å¿…ç€æ€¥ã€‚',
                'é›†ä¸­æ³¨æ„åŠ›ï¼Œæˆ‘ä»¬å¼€å§‹ã€‚'
            ],
            progress: [
                'ä¿æŒä¸“æ³¨ï¼Œç»§ç»­å‰è¿›ã€‚',
                'å¾ˆå¥½ï¼ŒèŠ‚å¥å¾ˆç¨³ã€‚',
                'ä¸“æ³¨å½“ä¸‹è¿™ä¸€æ­¥ã€‚',
                'ä¸è¦æƒ³å¤ªå¤šï¼Œåšå¥½çœ¼å‰çš„äº‹ã€‚'
            ],
            complete: [
                'è¿™ä¸€æ­¥å®Œæˆäº†ï¼Œè¿›å…¥ä¸‹ä¸€æ­¥ã€‚',
                'ç¨³æ­¥æŽ¨è¿›ï¼Œå¾ˆå¥½ã€‚',
                'å®Œæˆï¼Œç»§ç»­ã€‚',
                'è¿›å±•é¡ºåˆ©ã€‚'
            ],
            finish: [
                'å…¨éƒ¨å®Œæˆã€‚ä½ åšåˆ°äº†ã€‚',
                'ä»»åŠ¡å®Œæˆã€‚è¿™æ˜¯ä½ ä¸“æ³¨çš„ç»“æžœã€‚',
                'å¾ˆå¥½ï¼Œä»Šå¤©çš„ç›®æ ‡å·²ç»è¾¾æˆã€‚'
            ],
            skip: [
                'æœ‰æ—¶è·³è¿‡ä¹Ÿæ˜¯æ˜Žæ™ºçš„é€‰æ‹©ã€‚',
                'å¯ä»¥ã€‚ç»§ç»­ä¸‹ä¸€æ­¥ã€‚'
            ],
            shelve: [
                'æš‚æ—¶æç½®ï¼Œé€‚å½“çš„ä¼‘æ¯ä¹Ÿå¾ˆé‡è¦ã€‚',
                'å¯ä»¥ã€‚å‡†å¤‡å¥½äº†å†ç»§ç»­ã€‚'
            ]
        }
    }
];

// èŽ·å–éšæœºæ¶ˆæ¯
function getRandomMessage(coach, type) {
    const messages = coach.messages[type];
    if (!messages || messages.length === 0) return '';
    return messages[Math.floor(Math.random() * messages.length)];
}

// èŽ·å–æ¨¡æ¿åˆ†ç±»
function getTemplateCategories() {
    const categories = new Set();
    TASK_TEMPLATES.forEach(t => categories.add(t.category));
    return Array.from(categories);
}

// æ ¹æ®åˆ†ç±»èŽ·å–æ¨¡æ¿
function getTemplatesByCategory(category) {
    if (!category || category === 'å…¨éƒ¨') {
        return TASK_TEMPLATES;
    }
    return TASK_TEMPLATES.filter(t => t.category === category);
}
